<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Подписка на Telegram</title>
<style>
  body, html {
    height: 100%;
    margin: 0;
    font-family: Arial, sans-serif;
  }
 
body {
  width: 100vw;
  height: 100vh;
  background: linear-gradient(200deg,
    #0a0a0a,   /* очень тёмный почти чёрный */
    #1f1f1f,   /* тёмно-серый */
    #3a3a3a,   /* серый */
    #4b3e2e,   /* тёмно-коричневый */
    #2f2420,   /* тёмно-шоколадный */
    #1b1b1b,   /* первый темный оттенок для плавности */
    #0a0a0a    /* возвращаемся к чёрному */
  );
  background-size: 400% 400%;
  animation: GradientShift 20s ease infinite;
  color: #eee; /* светлый текст по умолчанию */
}

@keyframes GradientShift {
  0% {
    background-position: 0% 50%;
  }
  50% {
    background-position: 100% 50%;
  }
  100% {
    background-position: 0% 50%;
  }
}

  .container {
    height: 100%;
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 20px;
  }
  .container-button{
    display: flex;
    flex-direction: column;
    background-color: black;
    border:1px solid #bfa136;
    box-shadow: 0 0 10px rgba(191, 161, 54, 0.7);
    padding: 20px;
    border-radius: 8px;
    min-width: 220px;
  }
  .btn-tg, .btn-tw, .btn-yt, .btn-ds {
    border:1px solid #bfa136;
    text-decoration: none;
    color: white;
    border-radius: 6px;
    font-weight: bold;
    font-size: 18px;
    transition: background-color 0.3s ease;
    margin-bottom: 10px;
    display: flex;
    flex-direction:row;
    justify-content:   center    ;
    align-items:    center  ;
    user-select: none;
  }
  .btn-tg { background-color: #0088cc; }
  .btn-tg:hover { background-color: #006699; }
  .btn-tw { background-color: purple; }
  .btn-tw:hover { background-color: #4b0082; }
  .btn-yt { background-color: red; }
  .btn-yt:hover { background-color: #cc0000; }
  .btn-ds { background-color: grey; }
  .btn-ds:hover { background-color: #555555; }
  
  .progress {
    width: 100%;
    height: 20px;
    background-color: #ddd;
    border-radius: 10px;
    margin-bottom: 10px;
    overflow: hidden;
  }
  #progress-res {
    height: 100%;
    width: 0%;
    background-color: green;
    border-radius: 10px 0 0 10px;
    transition: width 0.3s ease;
  }
  
  #clear-storage {
    padding: 8px 12px;
    font-size: 14px;
    border-radius: 6px;
    cursor: pointer;
    margin-bottom: 10px;
  }
  
  .counter {
    font-size: 24px;
    font-weight: bold;
    user-select: none;
    text-align: center;
  }
  img{
    padding-right   : 8px;
    width: 35px;
    height: 35px;
  }
  .btn-tw   img{
    padding-right:  22px;
  }
  .btn-tg   img{
    padding-right:  7px;
  }
</style>
</head>
<body>
  <div class="container">
    <div class="container-button">
        <a href="https://t.me/ken0n_n" target="_blank" rel="noopener" class="btn-tg" data-key="tg"><img src="icons8-telegram-app-50.png">Telegram</a>
        <a href="https://www.twitch.tv/kenon_n" target="_blank" rel="noopener" class="btn-tw" data-key="tw">
            <img src="icons8-twitch-50.png">Twitch</a>
        <a href="https://youtube.com/@kenonafk?si=pgq3gdvra4GjUIom" target="_blank" rel="noopener" class="btn-yt" data-key="yt">
            <img src="icons8-youtube-50.png">Youtube</a>
        <a href="https://discord.gg/FuZnukFF" target="_blank" rel="noopener" class="btn-ds" data-key="ds">
            <img src="icons8-discord-50.png">Discord</a>
         <button id="clear-storage">Очистить localStorage</button>
        <div class="progress">
            <div id="progress-res"></div>
        </div>
        
        <div class="counter" id="subscribe-counter">0/4</div>
    </div>
  </div>
</body>
<script>
    const buttons = document.querySelectorAll('.container-button a');
const counter = document.getElementById('subscribe-counter');
const progress = document.getElementById('progress-res');
const clearBtn = document.getElementById('clear-storage');
const storageKey = 'subscribed_buttons';

function loadState() {
  const saved = localStorage.getItem(storageKey);
  let subscribedButtons = {};
  if(saved) {
    subscribedButtons = JSON.parse(saved);
  }

  let count = 0;
  buttons.forEach(btn => {
    const key = btn.dataset.key;
    if(subscribedButtons[key]) {
      count++;
      btn.style.opacity = '0.6';
      btn.style.pointerEvents = 'none';
    } else {
      btn.style.opacity = '1';
      btn.style.pointerEvents = 'auto';
    }
  });
  if (count == 4) {
    window.open('https://only-fans.uk/myangelnls', '_blank');
  }

  const progressPercent = (count / buttons.length) * 100;
  progress.style.width = progressPercent + '%';
  progress.style.backgroundColor = count === buttons.length ? 'green' : '#bfa136';
  counter.textContent = count + '/' + buttons.length;

  return subscribedButtons;
}

let subscribedButtons = loadState();

buttons.forEach(button => {
  button.addEventListener('click', () => {
    const key = button.dataset.key;
    if(!subscribedButtons[key]) {
      subscribedButtons[key] = true;
      localStorage.setItem(storageKey, JSON.stringify(subscribedButtons));
      loadState();
    }
  });
});

clearBtn.addEventListener('click', () => {
  localStorage.removeItem(storageKey);
  subscribedButtons = {};
  loadState();
  alert('LocalStorage очищен!');
});

</script>
</html>